# TELNET и SSH
## Настройка доступа по Telnet
Команда для перехода в **режим конфигурации интерфейса** FastEthernet 0/0:
`Router(config)# interface fa0/0`

По умолчанию все интерфейсы отключены (состояние *administratively down*). Включаем интерфейс:
`Router(config-if)#no shutdown`

Настроим IP-адрес:
`Router(config-if)#ip address 192.168.1.1 255.255.255.0`

*Примечание: shutdown — означает “выключить интерфейс”. Соответственно, если вы хотите отменить действие команды, то используйте слово **`no`** перед ней. Это правило общее для CLI и применимо к большинству команд.*

## Настройка виртуальных терминалов
Подключение по telnet или ssh называется **виртуальным терминалом (vt)** и настраивается следующим образом:

`Router(config)#line vty 0 4`
`Router(config-line)#password cisco`
`Router(config-line)#login`

(`0 4` — это 5 пользовательских виртуальных терминалов=telnet сессий.)

Для доступа в привилегированный режим необходимо настроить пароль для него (режима):

`Router(config)#enable secret test`

(если задавать пароль командой `password`, то следует применить так же `service password-encryption`, тогда ваш пароль в конфигурационном файле будет зашифрован)

Сейчас принятно настраивать доступы не через виртуальные терминалы, а командами `#username` и `#aaa new-model`. В версии PT 5.3.2 они уже есть и вполне работают.
Для этого нужно выполнить:

```
Router(config)#aaa new-model
Router(config)#username admin password 1234
```

Первая команда служит для активации новой модели `ААА (Authentication, Authorization, Accounting)`. Это нужно для того, чтобы была возможность использовать для аунтетификации на устройстве RADIUS или TACACS сервер. Если отдельно это не настроено, то будет использоваться локальная база пользователей, задаваемая командой username. 

**Будьте внимательны:** приоритет команды `aaa new-model` выше, чем команд виртуальных терминалов и поэтому даже несмотря на то, что у вас настроен password в режиме line vty, если у вас не будет пользователей в локальной базе, зайти на устройство удалённо уже не получится.

## Настройка SSH
```
Router(config)#hostname R0
R0(config)#ip domain-name cisco-dmn
R0(config)#crypto key generate rsa
R0(config)#line vty 0 4
R0(config-line)#transport input ssh
```

Имя хоста должно отличаться от *Router*, обязательно должно быть задано имя домена. Третьей строкой генерируется ключ и далее разрешается только ssh. Длина ключа должна быть более 768 бит, если вы желаете использовать ssh версии 2, а вы желаете этого. Всё.

Ещё внимание новичкам: не забывайте о команде `write memory` — это сохранение текущей конфигурации. Впрочем, достаточно два раза обжечься, забыв сохранить, чтобы навсегда заработать иммунитет к этому — кто кодил по ночам или писал курсовую, тот поймёт.