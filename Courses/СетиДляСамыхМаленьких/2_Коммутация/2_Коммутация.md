# Коммутация
Важные определения:

* **СКС** — структурированная кабельная система. На деле это все провода, розетки, патчпанели и патчкорды, то есть грубо говоря, это физика вашей сети в узком смысле, в широком — это совокупность сетей: ЛВС, телефонные сети, системы видеонаблюдения и прочее.

* **ЛВС** = Локальная Вычислительная Сеть = **LAN** = Local Area Network. Буржуйский термин более универсален и даёт более простое представление о своём значении.

IP-адреса бывают публичными (уникальными на весь мир) и приватными (доступными для использования в локальных сетях).

Публичные IP-адреса распределяются силами организации IANA (Internet Assigned Numbers Authority).

Приватные IP-адреса никто не контроллирует и они находится в следующих диапазонах:
* 10.0.0.0 — 10.255.255.255
* 172.16.0.0 — 172.31.255.255
* 192.168.0.0 — 192.168.255.255

Они выбраны из каждого класса сети, но сама идея классовости сети уже умерла.

**Широковещательный домен** — область сети, в которой происходит обмен широковещательными сообщениями, и устройства могут отправлять друг другу сообщения непосредственно, без участия маршрутизатора.

Широковещательный домен ограничен маршрутизатором.

Также VLAN ограничивает широкое вещание: только устройства одного VLAN буду в одном широковещательном домене.

Коммутатор работает с канальным уровнем, т.е. работает с MAC-адресами.

## Полезные FAQ
* Q: Что произойдёт, если тегированный кадр прилетит на access-порт? 
* A: Он будет отброшен.
---
* Q: Что произойдёт, если нетегированный кадр прилетит на trunk-порт?
* A: Он будет помещён в Native VLAN. По умолчанию им является 1-й VLAN. Но вы можете поменять его командой switchport trunk native vlan 2
В этом случае все кадры, помеченные 2-м вланом будут уходить в этот порт нетегироваными, а нетегированные кадры, приходящий на этот интерфейс, помечаться 2-м вланом.
Кадры с тегами других вланов останутся неизменными, проходя, через такой порт.
---
* Q: Можно ли конечным узлам (компьютерам, ноутбукам, планшетам, телефонам) отправлять тегированные кадры и соответственно подключать их к транковым портам?
* A: Да, можно. Если сетевая карта и программное обеспечение поддерживает стандарт 802.1q, то узел может работать с тегированными кадрами.
---
* Q: Что будет с тегированными кадрами, если они попадут на обычный неуправляемый коммутатор или другое устройство, не понимающее стандарт 802.1q?
* A: Скорее всего, свич его отбросит из-за увеличенного размера кадра. Зависит от разных факторов: производитель, софт (прошивка), тип форвардинга (cut-through, store-and-forward).

## Сеть управления
Можно (и в реальности нужно) устанавливать сети управления на коммутаторах для их настройки:
```
msk-arbat-dsw1(config)#interface vlan 2
msk-arbat-dsw1(config-if)#description Management
msk-arbat-dsw1(config-if)#ip address 172.16.1.2 255.255.255.0
```

И дальше уже работаем с этим как с физическим интерфейсом.

## banner
Можно установить текст приветствия (отображаемый при входе на устройство):
```
Switch(config)#banner motd q

Enter TEXT message. End with the character 'q'.
It is just banner.
q

Switch(config)#
```

## Сохранение конфигурации в энергонезависимую память
```
# copy running-config startup-config
```

## Ссылки для чтения
* [Частный IP-адрес](https://ru.wikipedia.org/wiki/%D0%A7%D0%B0%D1%81%D1%82%D0%BD%D1%8B%D0%B9_IP-%D0%B0%D0%B4%D1%80%D0%B5%D1%81)
* [Адресация в IP-сетях](http://citforum.ru/nets/ip/glava_3.shtml)
* [ARP](http://xgu.ru/wiki/ARP)
* [VTP](http://xgu.ru/wiki/VTP)
* [QinQ](http://www.hilik.org.ua/q-in-q-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B2-cisco-catalyst-3750/)
* [зарезервированные номера VLAN](http://etherealmind.com/cisco-ios-vlan-1002-reserved-1005-purpose-function/)